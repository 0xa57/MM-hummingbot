{"version":3,"file":"index.js","sources":["../src/MenuItem/index.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-empty-interface */\n/** @jsx jsx */\nimport * as CSS from \"csstype\";\nimport React from \"react\";\nimport { css, jsx } from \"@emotion/core\";\nimport { useMenuIconSize, useMenuColor } from \"../MenuConfig\";\nimport { useMenuItemClickListener } from \"../MenuItemClickListener\";\nimport { assertUnreachable } from \"../shared/assertUnreachable\";\nimport tinycolor from \"tinycolor2\";\nimport { colors } from \"../colors\";\n\nfunction getIconHorizontalPadding(\n  iconSize: ReturnType<typeof useMenuIconSize>\n): CSS.PaddingProperty<number> {\n  switch (iconSize) {\n    case \"normal\":\n      return 12;\n    case \"small\":\n      return 8;\n    default:\n      assertUnreachable(iconSize);\n  }\n}\n\nfunction getIconSize(\n  iconSize: ReturnType<typeof useMenuIconSize>\n): CSS.WidthProperty<number> {\n  switch (iconSize) {\n    case \"normal\":\n      return 16;\n    case \"small\":\n      return 10;\n    default:\n      assertUnreachable(iconSize);\n  }\n}\n\nfunction getIconMarginLeft(\n  iconSize: ReturnType<typeof useMenuIconSize>\n): CSS.MarginLeftProperty<number> {\n  switch (iconSize) {\n    case \"normal\":\n      return \"initial\";\n    case \"small\":\n      return -7;\n    default:\n      assertUnreachable(iconSize);\n  }\n}\n\ninterface Props\n  extends Pick<\n    React.DetailedHTMLProps<\n      React.HTMLAttributes<HTMLDivElement>,\n      HTMLDivElement\n    >,\n    \"onClick\"\n  > {\n  className?: string;\n  /** Icon to display at the end of a menu item.\n   *\n   * This element will always be rendered unless the value is `undefined`. If\n   * you want an empty node, a spacer for example, use `null`\n   */\n  endIcon?: React.ReactNode;\n  /**\n   * Indicates if this menu item can be itneracted with. Defaults to `true`. If\n   * set to `false`, there will be no hover effects.\n   *\n   * This is _not_ the same as `disabled`\n   */\n  interactive?: boolean;\n  selected?: boolean;\n  /** Icon to display at the start of a menu item.\n   *\n   * This element will always be rendered unless the value is `undefined`. If\n   * you want an empty node, a spacer for example, use `null`\n   */\n  startIcon?: React.ReactNode;\n}\n\nexport const MenuItem = React.forwardRef<\n  HTMLDivElement,\n  React.PropsWithChildren<Props>\n>(\n  (\n    {\n      children,\n      endIcon,\n      interactive = true,\n      onClick,\n      selected = false,\n      startIcon,\n      ...props\n    },\n    ref\n  ) => {\n    const iconSize = useMenuIconSize();\n    const menuItemClickListener = useMenuItemClickListener();\n    const menuColor = useMenuColor();\n\n    const selectedTextColor = tinycolor\n      .mostReadable(menuColor, [colors.white, colors.grey.darker], {\n        level: \"AA\",\n        size: \"small\",\n      })\n      .toString();\n    const selectedBackgroundColor = menuColor;\n\n    const selectedStyles = interactive && {\n      backgroundColor: selectedBackgroundColor,\n      color: selectedTextColor,\n    };\n\n    const hoverStyles = interactive && {\n      backgroundColor: colors.silver.light,\n    };\n\n    /**\n     * Handler to call `onClick` handler passed in props and also handler passed\n     * via context\n     */\n    const delegatingOnClick = React.useCallback<React.MouseEventHandler<any>>(\n      (event) => {\n        if (onClick) onClick(event);\n        if (menuItemClickListener) menuItemClickListener(event);\n      },\n      [menuItemClickListener, onClick]\n    );\n\n    return (\n      <div\n        {...props}\n        onClick={delegatingOnClick}\n        css={css({\n          ...(selected && selectedStyles),\n          ...{ \"&[aria-expanded=true]\": selectedStyles },\n          ...(!selected && { \"&:hover\": hoverStyles }),\n          cursor: interactive ? \"pointer\" : undefined,\n          borderRadius: 4,\n          display: \"flex\",\n          paddingLeft: 12,\n          paddingRight: 12,\n          paddingTop: 4,\n          paddingBottom: 4,\n        })}\n        ref={ref}\n      >\n        {typeof startIcon !== \"undefined\" && (\n          <div\n            css={css({\n              flex: \"none\",\n              height: 20,\n              marginLeft: getIconMarginLeft(iconSize),\n              marginRight: getIconHorizontalPadding(iconSize),\n              width: getIconSize(iconSize),\n            })}\n          >\n            {startIcon}\n          </div>\n        )}\n        <div\n          css={css({\n            flex: \"1\",\n            /* This is weird but it's necessary to truncate menu items */\n            minWidth: 0,\n          })}\n        >\n          {children}\n        </div>\n        {typeof endIcon !== \"undefined\" && (\n          <div\n            css={css({\n              flex: \"none\",\n              height: 20,\n              marginLeft: getIconHorizontalPadding(iconSize),\n              width: getIconSize(iconSize),\n            })}\n          >\n            {endIcon}\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n"],"names":["assertUnreachable","React","useMenuIconSize","useMenuItemClickListener","useMenuColor","colors","jsx","css"],"mappings":"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"}